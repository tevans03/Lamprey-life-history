# Lamprey-life-history
<b>Lamprey life history model v1.0 user guide</b>

<i>Introduction</i><br>
The Shiny app user interface (UI) is designed to be easy to use and can be run without making any changes simply by selecting “Run the model.” Just because you can does not mean you should; users should understand the model controls in the UI before using the model results in their own work, and preferably will understand the code which powers the model to at least a basic degree. Each time the model is run, because stochastic effects are present, new output will be generated, and although it may be similar to prior output, it is unlikely to be identical. The option to run the model is directly below the “Model Iterations” value, already set to 1000 when the model is opened. Although 1000 iterations is useful for generating publishable results, this can take 2-5 minutes (depending on the computer’s power) to calculate. As a result for preliminary work, users should probably use <50 iterations. Model output generated with few iterations is usually reflective of output with many iterations. The guide below follows the order of the options from top to bottom in the UI.

<i>Strategies</i><br>
The model includes all of the strategies examined in the manuscript (n = 44), and the file is stored in the folder “Data” within the model’s folder. Users can change the strategies either by modifying the “Strategies.txt” file (this is a tab-delimited file; this approach is not recommended) with a text editor (e.g., Excel, Notepad), or by clicking the “Browse” button in the model, and navigating to the new strategy file. Only one strategy file can be evaluated at a time in the model.

<i>Colors for graphs</i><br>
Colors are allowed to be chosen for the “Output” tab, these colors apply only to the model output, and not to all graphs in the UI. A limited range of colors are offered, and users should not select the same colors, or they will be unable to differentiate strategies at the “Output” tab. Figures may be copied directly from the model so simple grey-scale options are possible to make manuscript preparation simpler.

<i>Setting an initial weight</i><br>
In the model lampreys are assumed to begin at day 1 of age-1, and so a user must decide upon an “Initial weight (g).” Although many values are possible (limits have been placed), lower values are far more likely for ammocoete populations. As a general guide, values of ~0.7 grams would correspond to animals ~70 mm long in many lamprey species at the end of their first year, but many ammocoetes are 15 – 50 mm (0.05 – 0.4 g) at start of first year.

<i>Life stage tabs</i><br>
Below the initial weight input is a series of four tabs, which correspond to each life stage. In each tab are the parameters which can be manipulated for the life stage noted. Only one life stage’s parameters are displayed at a time to limit confusion. For stochastic values (those with a mean and standard deviation) stochasticity can be removed from the model simply by setting the standard deviation to zero. If the user decides on this approach, depending on how many parameters are prevented from varying and how wide the variation is on those that may still fluctuate, fewer iterations of the model will be necessary. If not, stochasticity is allowed, the model is determinate and a single iteration is necessary. Many of these settings are also associated with graphical displays shown in various tabs. Each setting and the display it is associated with (if there is one) is described in the subheadings below. Any graphs produced are updated on the fly while the settings are being changed.

<i>Ammocoete.</i> The model defaults for ammocoetes are set to American brook lamprey (Lethenteron appendix) in New York State. After selecting the “Ammocoete” tab in the grey-shaded area, the user should also select the “Ammocoete Growth Parameters” tab to see how they decisions will change the model input. The options for the ammocoete stage begin with von Bertalanffy parameters. While most weight-based von Bertalanffy equation  calculations assume an exponent of 3, ammocoetes are dissimilar from most other fishes and their length-weight relationship  exponent is well below 3. As a result, users can input their own estimate of b or use the default (2.611) developed form American brook lamprey ammocoetes. Ammocoetes of all species have similar length-weight relationships, and b will be ~2.6 in many species. Immediately below the input for b is the “W-infinity” (W∞), which is also a component of the von Bertalanffy growth equation. Users should select a W∞ based on their knowledge of the population to be modeled. The last three inputs (“Mean K”, “SD K”, “Max K”) are all related to the K parameter in the von Bertalanffy equation. The mean and SD are the values used to generate stochastic values of K, and the distribution of values is shown in the top panel. To prevent the model from developing unusually high K values by chance alone, a maximum value (here set to 1) is applied. If the model does generate such values that value is discarded.
The model can also simulate density dependence in ammocoete growth, by assuming that values of K are generally lower in younger ammocoetes and higher in older ammocoetes. By default this is turned off, but when turned on (set to “Yes”) the graphs will update. The top graph will now display the distributions of K selected at each age, and their mean when this occurs. To change the rate at which K approaches the “Mean K” selected by the user, the “Rate of change of K” can be increased or decreased. Lower values mean that K rises to its highest value over longer intervals, and higher values the opposite. Below the distributions of K is the von Bertalanffy curve showing the same curve based on the mean, but dotted lines for all curves with values of K lower than the mean K.
Lastly, the mean annual survival rate (“Mean Survival”) and its SD (“SD Survival”) are able to be set below by slider. These values can be between 0 and 1, by increments of 0.01. Survival distributions are not displayed in the “Ammocoete Growth Parameter” tab, to see how survival changes impact the model the user must select the “Survival Distributions” tab.

<i>Juvenile.</i> The “Juvenile” tab includes very similar information to the “Ammocoete” tab, and functions much in the same way. As before, the user should select the “Juvenile Growth Parameter” tab before manipulating these settings. The default settings are similar to growth rates observed for parasitic Ichthyomyzon spp. with growth rate declining each year of parasitic life beyond one.
The growth rate is calculated differently from ammocoetes, for juveniles a randomly drawn average growth rate (“Mean growth”) around a normal distribution (based on “SD mean growth rate”) is multiplied by growing days in a year (“Growing days”) to produce a weight gain. Each model year the distribution of growth rates is sampled again, so wide SD makes for highly variable growth. If a determinate growth is desirable the SD can be set to zero. Below these growth rate settings, another parameter, c, is controlled. The parameter c can either increase, decrease, or maintain the annual growth rate. When c is negative mean daily growth rate declines each year of juvenile life.
Lastly, the mean annual survival rate (“Mean Survival”) and its SD (“SD Survival”) are able to be set by slider in an identical fashion to ammocoetes. Survival distributions are in the “Survival Distributions” tab. The “Cutoff length” is the minimum weight need to avoid a penalty in survival rate when becoming a juvenile (for a full description see the manuscript). Changing this value does not change a graphical output, but will influence the model.

<i>Metamorphic.</i> The metamorphic tab is simpler than either of the previous tabs. Growth is simply a percentage of the weight at the year prior to transformation. By default this is set to zero, following the logic described in the model. No graphical output is displayed for this growth setting. Below the “Percent growth” input, the mean annual survival (“Mean survival”) and its SD (“SD survival) can be set. Distributions are again reported in the “Survival Distributions” tab.

<i>Adult.</i> The adult tab is also a simple tab, few settings are controlled here. Growth is, again, simply a percentage of the weight at the year prior to transformation. By default this is set to zero, following the logic described in the model, but could be made negative. There is no reason to expect the value to be larger than zero (adults never feed in any species). No graphical output is displayed for this growth setting. Below the “Percent growth” input, the mean relative fecundity (“Mean relative fecundity”) and its SD (“SD relative fecundity”) are set. Many lampreys have ~400 eggs/g of female body weight, but the value does vary to some degree and can be manipulated here; no graphical output is displayed for this input. The annual survival (“Survival”) is assumed to be determinate and set here; the value is reported in the “Survival Distributions” tab. As for juveniles, the “Cutoff length” is the minimum weight need to avoid a penalty in survival rate when becoming an adult (for a full description see the manuscript). Changing this value does not change a graphical output, but will influence the model.

<i>Running the model</i><br>
When the user is satisfied with the state of the model, they may select the brightly colored “Run the model” button in the top left corner of the model. However, simply selecting the button does not initiate model calculations, the interface waits for the user to select the “Output” tab before calculating the results. If prior results have been calculated these will remain only until the new realization of the model is complete. Once the “Output” tab is selected a “Running Model” alert appears in the bottom right corner, which keeps track of the percentage of calculations that have been completed. At low iterations this may appear and disappear so quickly as to be unseen, but at higher values it is an important confirmation that the calculations are underway. If the user has uploaded an incorrectly designed strategy file this is the time at which it will fail. After completion, various outputs are generated, but all are available to be copied directly from the model.

<i>Potential improvements to the model</i><br>
While the published model is not currently scheduled to be updated, it has a number of components built in to allow flexibility if users decide to do so themselves. Notably transformers and adults are areas in which the model can be improved rapidly, if better estimates of parameters that influence these life stages are measured in wild populations.
